<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Welkom bij de luchthaven</title>

    <!-- Import JQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>

    <!-- bootstrap js -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <!-- Import Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/modals.css">


    <!-- Datatables -->
    <Link rel="stylesheet" href="//cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/select/1.2.3/css/select.dataTables.min.css">
    <script src="https://cdn.datatables.net/select/1.2.3/js/dataTables.select.min.js"></script>
    <script src ="js/flights.js"></script>

    <script>
        $(document).ready(function() {

            var rowSelected = false;

            $("#airplaneForm").on('submit', function(e){
                console.log("Submitted!");
                addAirplane();
                rowSelected = false;
            });

            $("#bookFlightForm").on('submit', function(e){
                bookFlight(table.row('.selected'));
                console.log("Submitted!");
                rowSelected = false;
            });


            $('#airplaneTable').DataTable({
                columns: [
                    {"data": "model"},
                    {"data": "currentFuel"},
                    {"data": "airport"}
                ]
            });

            getAirplanes();

        var table = $('#airplaneTable').DataTable();

        $('#airplaneTable tbody').on( 'click', 'tr', function () {
            if ( $(this).hasClass('selected') ) {
                $(this).removeClass('selected');
                rowSelected = false;
            }
            else {
                table.$('tr.selected').removeClass('selected');
                $(this).addClass('selected');
                rowSelected = true;
            }
        } );

        $('#delete').click( function () {
            if(rowSelected == true){
                removeAirplane(table.row('.selected'));
                rowSelected = false;
            }
            else{
                $('#errorModal').modal("toggle");
            }
        } );

        $('#tank').click( function () {
            if(rowSelected == true){
                refillTank(table.row('.selected'));
                rowSelected = false;
            }
            else{
                $('#errorModal').modal("toggle");
            }
        } );

        $('#book').click( function () {
            if(rowSelected == true){
                $("#bookFlightModal").modal("toggle");
                rowSelected = false;
            }
            else{
                $('#errorModal').modal("toggle");
            }
        } );

        $('#cancelBooking').click( function () {
            $("#bookFlightModal").modal("toggle");
        } );

        $('#cancelAdding').click( function () {
            $("#airplaneModal").modal("hide");
        } );

        $('#errorCancel').click( function () {
            $("#errorModal").modal("toggle");
        } );


        });
    </script>

</head>
<body>
    <br>
    <button type="button" class="btn btn-success" data-toggle="modal" data-target="#airplaneModal">
        Add airplane
    </button>
    <button type="button" class="btn btn-warning" id="book">
        Book flight
    </button>
    <button type="button" class="btn btn-info" id="tank">
        Refill tank
    </button>
    <button type="button" class="btn btn-danger" id="delete">
        Delete
    </button>
    <br>
    <table id="airplaneTable" class="table" cellspacing="0" width="100%">
        <thead>
            <tr>
                <th>Model</th>
                <th>Current Fuel</th>
                <th>Current Airport</th>
            </tr>
        </thead>
        <tbody>

        </tbody>
    </table>

    <div class="container" >
        <div class="modal fade" id="airplaneModal">
            <div class="modal-dialog">
                <div class="modal-content" id="airplaneModalContainer">
                    <row>
                        <h1>Add an airplane</h1>
                    </row>
                    <br>
                    <form class="formcenter" data-toggle="validator" role="form" id="airplaneForm" onsubmit="return false;">
                        <div class="row form-group">
                            <div class="col-25">
                                <div class="control-label" id="modelText"></div>
                                <label for="model">Airplane model:</label>
                            </div>
                            <div class="col-75">
                                <input type="text" class="form-control" id="model" name="modelName" placeholder="Model name" value="" data-error="Please provide a name for the airplane." required>
                                <div class="help-block with-errors"></div>
                            </div>
                        </div>
                        <div class="row form-group">
                            <div class="col-25">
                                <div class="control-label" id="airportText"></div>
                                <label for="model">Airport:</label>
                            </div>
                            <div class="col-75">
                                <select id="airportLocation" required>
                                    <option value="Amsterdam">Amsterdam</option>
                                    <option value="London">London</option>
                                    <option value="Paris">Paris</option>
                                    <option value="Stockholm">Stockholm</option>
                                    <option value="Berlin">Berlin</option>
                                </select>
                            </div>
                        </div>
                        <div class="row form-group">
                            <input id="submitButton" type="submit" value="Add airplane">
                        </div>
                        <button type="button" class="btn btn-warning" id="cancelAdding">
                            Cancel
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="container" >
        <div class="modal fade" id="bookFlightModal">
            <div class="modal-dialog">
                <div class="modal-content" id="bookFlightContainer">
                    <row>

                    </row>
                    <br>
                    <form class="formcenter" data-toggle="validator" role="form" id="bookFlightForm" onsubmit="return false;">
                        <h1>Book your flight here</h1>
                        <div class="row form-group">
                            <div class="col-25">
                                <div class="control-label" id="airportSelect"></div>
                                <label for="model">Select destination:</label>
                            </div>
                            <div class="col-75">
                                <select id="airportLocationSelect" required>
                                    <option value="Amsterdam">Amsterdam</option>
                                    <option value="London">London</option>
                                    <option value="Paris">Paris</option>
                                    <option value="Stockholm">Stockholm</option>
                                    <option value="Berlin">Berlin</option>
                                </select>
                            </div>
                        </div>
                        <div class="row form-group">
                            <input id="bookFlight" type="submit" value="Book flight">
                        </div>

                    </form>
                    <button type="button" class="btn btn-warning" id="cancelBooking">
                        Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="container" >
        <div class="modal fade" id="errorModal">
            <div class="modal-dialog">
                <div class="modal-content" id="errorContainer">
                    <h1>Action not allowed.</h1>
                    <button type="button" class="btn btn-warning" id="errorCancel">
                        Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>
</body>
</html>